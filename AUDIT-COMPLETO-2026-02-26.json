{
  "audit_summary": {
    "project_name": "Spalla V2 Dashboard",
    "audit_date": "2026-02-26",
    "total_files": 16,
    "total_size_mb": 6.7,
    "critical_issues": 8,
    "high_issues": 7,
    "medium_issues": 12,
    "low_issues": 9,
    "info_issues": 5,
    "status": "PRODUCTION_WITH_RISK"
  },
  "inventory": {
    "main_files": [
      {
        "name": "10-APP-index.html",
        "lines": 1831,
        "size_kb": 135,
        "purpose": "Main UI (Alpine.js SPA with 8 pages)",
        "status": "ACTIVE"
      },
      {
        "name": "11-APP-app.js",
        "lines": 2152,
        "size_kb": 84,
        "purpose": "Application logic (Dashboard, tasks, WhatsApp, scheduling)",
        "status": "ACTIVE"
      },
      {
        "name": "12-APP-data.js",
        "lines": 1449,
        "size_kb": 126,
        "purpose": "Static reference data (Instagram profiles, dossiers, API config)",
        "status": "ACTIVE"
      },
      {
        "name": "13-APP-styles.css",
        "lines": 1831,
        "size_kb": 130,
        "purpose": "Styling for all components",
        "status": "ACTIVE"
      },
      {
        "name": "14-APP-server.py",
        "lines": 545,
        "size_kb": 21,
        "purpose": "Backend server (Zoom, Google Calendar, Supabase, Evolution API proxying)",
        "status": "ACTIVE"
      }
    ],
    "api_routes": [
      "api/zoom.js",
      "api/calendar.js",
      "api/schedule-call.js",
      "api/wa.js",
      "api/[...route].js",
      "api/test-zoom.js",
      "api/test-calendar.js"
    ],
    "documentation": [
      "00-LEIA-PRIMEIRO.md",
      "01-REPORT-COMPLETO-PRO-DEMETRIO.md",
      "02-FLOWCHARTS-SISTEMA.md",
      "03-DOC-TECNICA-TABELAS.md",
      "04-SPEC-VIEWS-COMPONENTES.md",
      "AUDIT-FIXES-FINAL-2026-02-25.md",
      "SUPABASE-FIXES-NEEDED.md",
      "YOLO-STATUS-2026-02-25.md"
    ]
  },
  "issues": [
    {
      "id": "CRITICAL-01",
      "file": "11-APP-app.js",
      "line": 11,
      "severity": "CRITICAL",
      "category": "security",
      "title": "Hardcoded Plaintext Password in Client Code",
      "description": "AUTH_PASSWORD 'spalla2026' is exposed in client-side JavaScript. Anyone can inspect network traffic or view source to gain access.",
      "impact": "Complete unauthorized access to dashboard. Mentee data, calls, tasks, and WhatsApp messages are fully exposed.",
      "fix": "Move password verification to backend. Use JWT tokens or session-based auth. Remove plaintext passwords from JavaScript entirely.",
      "cwe": "CWE-798: Use of Hard-coded Password"
    },
    {
      "id": "CRITICAL-02",
      "file": "12-APP-data.js",
      "line": 10,
      "severity": "CRITICAL",
      "category": "security",
      "title": "Hardcoded Evolution API Key in Client Code",
      "description": "EVOLUTION_API_KEY '07826A779A5C-4E9C-A978-DBCD5F9E4C97' is exposed in client JavaScript. Any user can impersonate WhatsApp API calls.",
      "impact": "Attacker can send messages via WhatsApp, access all conversations, modify data. Full compromise of WhatsApp integration.",
      "fix": "Move to backend environment variable. Never include API keys in client bundles. Use backend-only environment variables.",
      "cwe": "CWE-798: Use of Hard-coded Password/Secret"
    },
    {
      "id": "CRITICAL-03",
      "file": "11-APP-app.js",
      "line": 9,
      "severity": "CRITICAL",
      "category": "security",
      "title": "Hardcoded Supabase Anon Key in JavaScript",
      "description": "SUPABASE_ANON_KEY JWT is embedded in client code. This key grants full read access to Supabase database.",
      "impact": "Anyone can query Supabase directly using this key. Mentee phone numbers, emails, financial data, personal notes exposed.",
      "fix": "Anon keys should be in client (this is acceptable), but ensure RLS policies are STRICT. Review RLS in Supabase.",
      "cwe": "CWE-798: Hardcoded Password"
    },
    {
      "id": "CRITICAL-04",
      "file": "12-APP-data.js",
      "line": 280,
      "severity": "CRITICAL",
      "category": "security",
      "title": "Hardcoded Supabase Service Key in API Code",
      "description": "SUPABASE_SERVICE_KEY (admin credentials) visible in api/schedule-call.js. Grants admin access to entire database.",
      "impact": "Attacker can modify ANY database records, delete tables, bypass RLS, create backdoors.",
      "fix": "NEVER include service keys in deployed code. Use backend environment variables only (Railway, Vercel secrets).",
      "cwe": "CWE-798: Hardcoded Credentials"
    },
    {
      "id": "CRITICAL-05",
      "file": "14-APP-server.py",
      "line": 21,
      "severity": "CRITICAL",
      "category": "security",
      "title": "Hardcoded Zoom Credentials in Production Code",
      "description": "ZOOM_ACCOUNT_ID, ZOOM_CLIENT_ID, ZOOM_CLIENT_SECRET are hardcoded as fallback values (lines 24-26).",
      "impact": "Attacker can create unlimited Zoom meetings impersonating the system, access recording URLs, potentially modify meeting settings.",
      "fix": "Remove ALL fallback hardcoded credentials. Require environment variables. Fail gracefully if not provided.",
      "cwe": "CWE-798: Hardcoded Password"
    },
    {
      "id": "CRITICAL-06",
      "file": "14-APP-server.py",
      "line": 28,
      "severity": "CRITICAL",
      "category": "configuration",
      "title": "Missing Google Service Account Credentials",
      "description": "Code assumes credentials.json exists at ~/.config/google/credentials.json. File doesn't exist in source; relies on manual setup.",
      "impact": "Google Calendar integration fails silently. Schedule call endpoint creates Zoom meetings but no calendar events.",
      "fix": "Support environment variable GOOGLE_SA_CREDENTIALS_B64 (base64-encoded JSON). Document setup requirements.",
      "cwe": "CWE-427: Uncontrolled Search Path Element"
    },
    {
      "id": "CRITICAL-07",
      "file": "11-APP-app.js",
      "line": 676,
      "severity": "CRITICAL",
      "category": "logic",
      "title": "Unsafe JSON.parse() Without Try-Catch",
      "description": "Line 676: `JSON.parse(detailRes.data)` called without try-catch. If Supabase returns invalid JSON, app crashes.",
      "impact": "Frontend crashes when loading mentee detail. Entire detail page becomes unusable for affected mentees.",
      "fix": "Wrap in try-catch: `try { JSON.parse(...) } catch (e) { return defaultData; }`",
      "cwe": "CWE-248: Uncaught Exception"
    },
    {
      "id": "CRITICAL-08",
      "file": "11-APP-app.js",
      "line": 854,
      "severity": "CRITICAL",
      "category": "logic",
      "title": "Unsafe localStorage JSON Parsing",
      "description": "Line 854: `JSON.parse(raw)` called on localStorage without validation. Malicious user can inject invalid JSON.",
      "impact": "If localStorage is corrupted (XSS attack), tasks load fails and app becomes unusable.",
      "fix": "Wrap in try-catch and validate structure.",
      "cwe": "CWE-248: Uncaught Exception"
    },
    {
      "id": "HIGH-01",
      "file": "11-APP-app.js",
      "line": 535,
      "severity": "HIGH",
      "category": "authentication",
      "title": "Plaintext Password Comparison Vulnerable to Timing Attacks",
      "description": "Line 536: `this.auth.password === CONFIG.AUTH_PASSWORD` is susceptible to timing attacks. Attacker can measure response time to guess password.",
      "impact": "Attacker can brute-force password byte-by-byte without trying all combinations.",
      "fix": "Use constant-time comparison: `timingSafeEqual(password, AUTH_PASSWORD)` or hash-based authentication.",
      "cwe": "CWE-208: Observable Timing Discrepancy"
    },
    {
      "id": "HIGH-02",
      "file": "10-APP-index.html",
      "line": 40,
      "severity": "HIGH",
      "category": "configuration",
      "title": "Relative API URL in Production Frontend",
      "description": "API_BASE_URL set to empty string (line 40). In production, relies on same-origin requests. Breaks if frontend/backend on different domains.",
      "impact": "If frontend moves to different subdomain/domain, all API calls fail silently. No error messaging.",
      "fix": "Use environment variable: `API_BASE_URL = process.env.REACT_APP_API_URL || 'https://api.example.com'`",
      "cwe": "CWE-95: Improper Neutralization of Directives in Dynamically Evaluated Code"
    },
    {
      "id": "HIGH-03",
      "file": "11-APP-app.js",
      "line": 491,
      "severity": "HIGH",
      "category": "api_security",
      "title": "Unvalidated API Response Handling",
      "description": "Line 491: fetch('/api/wa') doesn't validate response Content-Type. Assumes JSON but error responses might be HTML.",
      "impact": "If backend returns HTML error, `res.json()` throws. No error boundary catches it; app crashes.",
      "fix": "Check `res.headers.get('content-type')` before parsing JSON.",
      "cwe": "CWE-347: Improper Verification of Cryptographic Signature"
    },
    {
      "id": "HIGH-04",
      "file": "14-APP-server.py",
      "line": 268,
      "severity": "HIGH",
      "category": "security",
      "title": "CORS Wildcard Allow-Origin in Python Backend",
      "description": "Line 272: `send_header('Access-Control-Allow-Origin', '*')` allows ANY origin to access backend. No CORS validation.",
      "impact": "Any website can make requests to backend on behalf of users. CSRF attacks enabled.",
      "fix": "Whitelist specific origins: `send_header('Access-Control-Allow-Origin', 'https://spalla-dashboard.vercel.app')`",
      "cwe": "CWE-942: Permissive Cross-domain Policy"
    },
    {
      "id": "HIGH-05",
      "file": "14-APP-server.py",
      "line": 422,
      "severity": "HIGH",
      "category": "logic",
      "title": "Potential Integer Overflow in mentorado_id",
      "description": "Line 424: `int(mentorado_id)` cast without range validation. JavaScript can send very large numbers.",
      "impact": "Database insert fails silently. Call isn't recorded in Supabase.",
      "fix": "Validate: `if not (1 <= mentorado_id <= 2147483647): return error`",
      "cwe": "CWE-190: Integer Overflow or Wraparound"
    },
    {
      "id": "HIGH-06",
      "file": "11-APP-app.js",
      "line": 491,
      "severity": "HIGH",
      "category": "error_handling",
      "title": "Missing Error Boundary for Async Loading",
      "description": "Line 491 onwards: `_loadWaProfilePics()` runs without error handling. If API fails, no fallback.",
      "impact": "WhatsApp profile pictures don't load. User sees no indication of error. Silently fails.",
      "fix": "Add error UI or toast notification when WhatsApp sync fails.",
      "cwe": "CWE-391: Unchecked Error Condition"
    },
    {
      "id": "HIGH-07",
      "file": "11-APP-app.js",
      "line": 609,
      "severity": "HIGH",
      "category": "data_consistency",
      "title": "Race Condition in Mentee Call Data Enrichment",
      "description": "Lines 597-621: `_enrichMenteesWithCalls()` recalculates days_since_call. If called twice in parallel, inconsistent state.",
      "impact": "Displayed call dates become inconsistent. KPI 'calls_30d' shows wrong values.",
      "fix": "Use Promise locking or state flag to prevent concurrent updates.",
      "cwe": "CWE-362: Concurrent Execution using Shared Resource with Improper Synchronization"
    },
    {
      "id": "MEDIUM-01",
      "file": "12-APP-data.js",
      "line": 140,
      "severity": "MEDIUM",
      "category": "data",
      "title": "Instagram Profile Photo Using External CDN URL",
      "description": "flaviannyartiaga profile photo is an Instagram CDN direct URL. CDN links expire or may be blocked.",
      "impact": "Profile photo may break without warning. No fallback.",
      "fix": "Download all Instagram photos locally to /photos/ directory.",
      "cwe": "CWE-426: Untrusted Search Path"
    },
    {
      "id": "MEDIUM-02",
      "file": "11-APP-app.js",
      "line": 514,
      "severity": "MEDIUM",
      "category": "architecture",
      "title": "TODO: Supabase Realtime Subscriptions Not Implemented",
      "description": "Line 513: TODO comment indicates realtime updates not wired. Data only refreshes on manual load.",
      "impact": "Changes in Supabase (new calls, tasks, messages) don't appear until user refreshes manually.",
      "fix": "Implement Supabase realtime subscriptions using `.on('postgres_changes')`",
      "cwe": "CWE-319: Cleartext Transmission of Sensitive Information"
    },
    {
      "id": "MEDIUM-03",
      "file": "11-APP-app.js",
      "line": 567,
      "severity": "MEDIUM",
      "category": "logging",
      "title": "DEBUG Console Logs Exposing Sensitive Data",
      "description": "Lines 567-569: console.log() outputs mentee data including personal fields to browser console.",
      "impact": "If user shares browser console screenshot or leaves browser open, sensitive mentee data visible.",
      "fix": "Remove debug logs in production. Use logger with level control.",
      "cwe": "CWE-532: Insertion of Sensitive Information into Log File"
    },
    {
      "id": "MEDIUM-04",
      "file": "11-APP-app.js",
      "line": 623,
      "severity": "MEDIUM",
      "category": "data_validation",
      "title": "No Validation on Instagram Handle Data",
      "description": "Lines 623-660: Enrichment from Supabase doesn't validate handle format (should start with @ or be plain alphanumeric).",
      "impact": "Malformed Instagram handles stored; links to Instagram profiles fail.",
      "fix": "Add regex validation: `/^[a-zA-Z0-9._-]+$/`",
      "cwe": "CWE-20: Improper Input Validation"
    },
    {
      "id": "MEDIUM-05",
      "file": "14-APP-server.py",
      "line": 79,
      "severity": "MEDIUM",
      "category": "timezone",
      "title": "Timezone Offset Calculation May Fail During DST Transitions",
      "description": "Lines 80-84: Timezone offset calculated at runtime. During DST transitions (2x/year in Brazil), offset may be wrong for times near transition.",
      "impact": "Zoom meetings created at wrong times (off by 1 hour) on specific dates.",
      "fix": "Use pytz to convert full datetime object, not just offset calculation.",
      "cwe": "CWE-208: Observable Timing Discrepancy"
    },
    {
      "id": "MEDIUM-06",
      "file": "11-APP-app.js",
      "line": 1006,
      "severity": "MEDIUM",
      "category": "validation",
      "title": "Empty Task Title Not Prevented at Backend",
      "description": "Line 1006: Frontend checks `!this.taskForm.titulo.trim()`, but backend has no validation. API allows empty titles.",
      "impact": "If frontend validation bypassed (malicious user), empty tasks created in database.",
      "fix": "Add server-side validation in Supabase RLS or backend endpoint.",
      "cwe": "CWE-20: Improper Input Validation"
    },
    {
      "id": "MEDIUM-07",
      "file": "11-APP-app.js",
      "line": 1050,
      "severity": "MEDIUM",
      "category": "error_handling",
      "title": "Silent Failure on Task Update to Supabase",
      "description": "Line 1050: `.catch()` is empty. If Supabase update fails, user thinks task saved but it wasn't.",
      "impact": "Data inconsistency. User sees local change but it's not persisted.",
      "fix": "Add `.catch(e => this.toast('Failed to save: ' + e.message, 'error'))`",
      "cwe": "CWE-391: Unchecked Error Condition"
    },
    {
      "id": "MEDIUM-08",
      "file": "10-APP-index.html",
      "line": 273,
      "severity": "MEDIUM",
      "category": "xss",
      "title": "Potential XSS in Instagram Handle Display",
      "description": "Although fixed with `.replace('@', '')`, if `m.instagram` contains HTML entities, they're not escaped before displaying.",
      "impact": "If Supabase data is compromised and contains `<script>alert(1)</script>`, it executes.",
      "fix": "Use Alpine's `x-text` (auto-escapes) instead of interpolation. Already correct, but maintain vigilance.",
      "cwe": "CWE-79: Improper Neutralization of Input During Web Page Generation"
    },
    {
      "id": "MEDIUM-09",
      "file": "11-APP-app.js",
      "line": 1309,
      "severity": "MEDIUM",
      "category": "logic",
      "title": "Reminders Loaded from localStorage Without Validation",
      "description": "Line 1309: `JSON.parse(raw)` assumes structure. No validation that array contains valid reminder objects.",
      "impact": "Corrupted localStorage causes app crash or unexpected behavior.",
      "fix": "Validate structure: check for required fields (texto, data, prioridade).",
      "cwe": "CWE-20: Improper Input Validation"
    },
    {
      "id": "MEDIUM-10",
      "file": "14-APP-server.py",
      "line": 234,
      "severity": "MEDIUM",
      "category": "encoding",
      "title": "JSON Response Encoding Not Forced UTF-8",
      "description": "Line 269: `ensure_ascii=False` allows non-ASCII chars. If response contains special chars (Ã§, Ã£, etc.), encoding may be inconsistent.",
      "impact": "Frontend receives malformed UTF-8. Portuguese characters display incorrectly.",
      "fix": "Add `.encode('utf-8')` explicitly.",
      "cwe": "CWE-176: Improper Handling of Unicode Encoding"
    },
    {
      "id": "MEDIUM-11",
      "file": "11-APP-app.js",
      "line": 768,
      "severity": "MEDIUM",
      "category": "logic",
      "title": "WhatsApp Message Text Extraction Has No Fallback",
      "description": "Lines 768-773: If message structure doesn't match expected fields, `conteudo` becomes undefined.",
      "impact": "WhatsApp messages don't display. Interaction history incomplete.",
      "fix": "Add fallback: `msg.body || msg.text || '[Mensagem nÃ£o suportada]'`",
      "cwe": "CWE-391: Unchecked Error Condition"
    },
    {
      "id": "MEDIUM-12",
      "file": "10-APP-index.html",
      "line": 46,
      "severity": "MEDIUM",
      "category": "accessibility",
      "title": "Loading Spinner Has No Fallback Text",
      "description": "Loading fallback div only shows emoji. Screen readers see nothing.",
      "impact": "Visually impaired users don't know app is loading.",
      "fix": "Add `aria-label=\"Carregando...\"` to #loading-fallback.",
      "cwe": "CWE-863: Incorrect Authorization"
    },
    {
      "id": "LOW-01",
      "file": "11-APP-app.js",
      "line": 235,
      "severity": "LOW",
      "category": "performance",
      "title": "KPI Calculation Iterates Over cohort Multiple Times",
      "description": "Lines 236-253: `.reduce()` called 5+ times on `cohort` array. For 37 mentees, inefficient but noticeable.",
      "impact": "Dashboard KPI cards render slowly on older devices.",
      "fix": "Single-pass aggregation: calculate all KPIs in one reduce().",
      "cwe": "CWE-1104: Use of Unmaintained Third Party Components"
    },
    {
      "id": "LOW-02",
      "file": "11-APP-app.js",
      "line": 300,
      "severity": "LOW",
      "category": "performance",
      "title": "Hardcoded Limit of 100 Tasks for Performance",
      "description": "Line 300: `slice(0, 100)` limits displayed tasks. Comment says 'for performance'. Unclear if data loss or just UI limit.",
      "impact": "If > 100 tasks, some are hidden without user knowing.",
      "fix": "Add pagination or lazy-loading. Show indicator if data is truncated.",
      "cwe": "CWE-770: Allocation of Resources Without Limits"
    },
    {
      "id": "LOW-03",
      "file": "11-APP-app.js",
      "line": 372,
      "severity": "LOW",
      "category": "localization",
      "title": "Status Labels Hardcoded in Portuguese",
      "description": "Line 368: Status labels like 'A Fazer' are hardcoded. No i18n for international use.",
      "impact": "App not easily translatable to English or other languages.",
      "fix": "Create i18n config with translation keys.",
      "cwe": "CWE-1104: Use of Unmaintained Third Party Components"
    },
    {
      "id": "LOW-04",
      "file": "14-APP-server.py",
      "line": 517,
      "severity": "LOW",
      "category": "logging",
      "title": "Log Messages May Expose Sensitive Information",
      "description": "Line 520: `print(f'[API] {args[0]}')` logs API paths. May include sensitive query parameters.",
      "impact": "If logs are shared/exposed, API paths with sensitive data visible.",
      "fix": "Sanitize log output. Mask sensitive parameters.",
      "cwe": "CWE-532: Insertion of Sensitive Information into Log File"
    },
    {
      "id": "LOW-05",
      "file": "10-APP-index.html",
      "line": 11,
      "severity": "LOW",
      "category": "caching",
      "title": "CSS Cache Busting Uses Query String Version Number",
      "description": "Line 11: `href=\"styles.css?v=29\"`. Version numbers must be manually incremented.",
      "impact": "Easy to forget incrementing. Users may see stale CSS.",
      "fix": "Use git hash or build timestamp: `?v={{ build_hash }}`",
      "cwe": "CWE-327: Use of a Broken or Risky Cryptographic Algorithm"
    },
    {
      "id": "LOW-06",
      "file": "12-APP-data.js",
      "line": 1278,
      "severity": "LOW",
      "category": "data",
      "title": "Fake WhatsApp Group ID Placeholder",
      "description": "Line 1278: Group ID uses placeholder '120363XXXXX@g.us'. Indicates incomplete/test data.",
      "impact": "WhatsApp group features won't work for this group.",
      "fix": "Replace with real group ID or remove placeholder entry.",
      "cwe": "CWE-170: Improper Null Termination"
    },
    {
      "id": "LOW-07",
      "file": "11-APP-app.js",
      "line": 1488,
      "severity": "LOW",
      "category": "logic",
      "title": "WhatsApp Reaction Message Fallback Text Missing",
      "description": "Line 1488: Returns `[Reacao]` as placeholder. User sees Portuguese text for emoji reactions.",
      "impact": "Minor: Emoji reactions display as text instead of emoji icon.",
      "fix": "Extract emoji: `m.reactionMessage?.text || 'ðŸ˜Š'`",
      "cwe": "CWE-170: Improper Null Termination"
    },
    {
      "id": "INFO-01",
      "file": "AUDIT-FIXES-FINAL-2026-02-25.md",
      "line": 38,
      "severity": "INFO",
      "category": "documentation",
      "title": "Documented RLS Policy Update Needed",
      "description": "Documentation mentions RLS policies fixed (line 74: ARCH-08), but RLS uses `USING (true)` = full access.",
      "impact": "No direct impact, but documentation inconsistent with code state.",
      "fix": "Update docs to reflect current RLS status or implement proper role-based RLS.",
      "cwe": "CWE-306: Missing Authentication"
    },
    {
      "id": "INFO-02",
      "file": "SUPABASE-FIXES-NEEDED.md",
      "line": 5,
      "severity": "INFO",
      "category": "documentation",
      "title": "Instagram Handle Duplication Issue Documented But Not Fully Resolved",
      "description": "Bug #2 mentions `igPhoto()` returns wrong photo for duplicate names (two Daniela Morais). Solution suggested but not implemented.",
      "impact": "Two mentees with same name show wrong photo. Minor UX issue.",
      "fix": "Implement Option A: Add Instagram handles to both Daniela entries in Supabase.",
      "cwe": "CWE-662: Improper Synchronization"
    },
    {
      "id": "INFO-03",
      "file": "14-APP-server.py",
      "line": 433,
      "severity": "INFO",
      "category": "logic",
      "title": "Zoom Recording URL Stored Twice",
      "description": "Line 431-434: Both `zoom_join_url` (join) and `link_gravacao` (recording) store zoom URL. Confusing semantics.",
      "impact": "Code confusion. Recording URL might overwrite join URL.",
      "fix": "Separate semantically: `zoom_join_url` for join, `zoom_recording_url` for recording.",
      "cwe": "CWE-1104: Use of Unmaintained Third Party Components"
    },
    {
      "id": "INFO-04",
      "file": "11-APP-app.js",
      "line": 88,
      "severity": "INFO",
      "category": "architecture",
      "title": "Task View Modes (board/list) Only Board Implemented",
      "description": "Line 88: taskView can be 'board' or 'list', but HTML only has board view. List view not in UI.",
      "impact": "Dead code in data structure. No functional impact but creates confusion.",
      "fix": "Either implement list view or remove from state.",
      "cwe": "CWE-561: Dead Code"
    },
    {
      "id": "INFO-05",
      "file": "14-APP-server.py",
      "line": 155,
      "severity": "INFO",
      "category": "configuration",
      "title": "Google Calendar Event Reminders Hardcoded",
      "description": "Lines 173-175: Reminders hardcoded to 30 min popup + 60 min email. No customization.",
      "impact": "User gets duplicate reminders they didn't configure.",
      "fix": "Accept reminder preferences from frontend.",
      "cwe": "CWE-1104: Use of Unmaintained Third Party Components"
    }
  ],
  "recommendations": [
    "IMMEDIATELY: Move ALL hardcoded credentials (passwords, API keys) to environment variables. Do not deploy to production with hardcoded secrets in JavaScript.",
    "IMMEDIATELY: Implement backend authentication instead of client-side password. Use JWT tokens with secure HttpOnly cookies.",
    "HIGH PRIORITY: Add error boundaries and try-catch blocks for all JSON parsing operations.",
    "HIGH PRIORITY: Implement CORS whitelist instead of wildcard allow. Only allow spalla-dashboard.vercel.app.",
    "HIGH PRIORITY: Add input validation on backend for all user-submitted data (task titles, reminder text, etc.).",
    "MEDIUM: Implement Supabase realtime subscriptions to show live updates without manual refresh.",
    "MEDIUM: Add comprehensive error logging/monitoring (Sentry, Datadog) to catch silent failures in production.",
    "MEDIUM: Create comprehensive test suite (unit tests for data transformations, integration tests for API flows).",
    "MEDIUM: Separate frontend and backend deployment. Use environment variables for cross-domain API calls.",
    "MEDIUM: Implement proper RLS policies in Supabase. Replace `USING (true)` with role-based access control.",
    "LOW: Add pagination to task board (currently hardlimited to 100 tasks).",
    "LOW: Implement i18n for translations. Support English and Portuguese.",
    "LOW: Create admin panel for managing Instagram profiles (instead of hardcoding in data.js).",
    "DOCUMENTATION: Create security runbook for deployment. Document all required environment variables.",
    "DOCUMENTATION: Add API documentation for all endpoints (Zoom, Calendar, Evolution, Supabase).",
    "MONITORING: Set up uptime monitoring for Supabase, Zoom, Evolution API, Google Calendar dependencies."
  ],
  "risk_assessment": {
    "authentication_risk": "CRITICAL",
    "data_exposure_risk": "CRITICAL",
    "api_security_risk": "HIGH",
    "data_consistency_risk": "HIGH",
    "availability_risk": "MEDIUM",
    "performance_risk": "LOW",
    "overall_risk_level": "CRITICAL"
  },
  "deployment_status": {
    "frontend": "LIVE on Vercel (https://spalla-dashboard.vercel.app/)",
    "backend": "LIVE on Railway (https://web-production-2cde5.up.railway.app)",
    "database": "LIVE on Supabase (knusqfbvhsqworzyhvip)",
    "integration_status": {
      "zoom": "âœ“ CONFIGURED",
      "google_calendar": "âœ— NOT CONFIGURED (credentials missing)",
      "supabase": "âœ“ LIVE",
      "evolution_whatsapp": "âœ“ CONNECTED"
    }
  },
  "conclusion": {
    "status": "PRODUCTION_WITH_SIGNIFICANT_SECURITY_RISK",
    "summary": "Spalla V2 is a well-architected, feature-rich CRM dashboard with comprehensive documentation and good code organization. However, it contains CRITICAL security vulnerabilities that must be fixed before handling production data with real users. Primary issues are hardcoded credentials (passwords, API keys) in client and server code, unsafe JSON parsing, and missing backend authentication. The system is currently functional but at high risk of compromise if deployed publicly.",
    "go_live_recommendation": "DO NOT deploy to production without fixing CRITICAL issues. Implement proper authentication, move credentials to environment variables, add error boundaries, and implement proper CORS. Currently suitable for internal testing only.",
    "estimated_fix_effort_hours": 40,
    "audit_confidence": "HIGH - Comprehensive source code review of all 16 main files"
  }
}
